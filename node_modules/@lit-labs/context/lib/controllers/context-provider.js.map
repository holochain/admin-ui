{"version":3,"file":"context-provider.js","sources":["../../src/lib/controllers/context-provider.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nimport {ContextEvent} from '../context-event.js';\nimport {Context, ContextType} from '../create-context.js';\nimport {ContextContainer} from './context-container.js';\nimport {ReactiveController, ReactiveElement} from 'lit';\n\n/**\n * A ReactiveController which can add context provider behavior to a\n * custom-element.\n *\n * This controller simply listens to the `context-request` event when\n * the host is connected to the DOM and registers the received callbacks\n * against its observable Context implementation.\n */\nexport class ContextProvider<T extends Context<unknown>>\n  extends ContextContainer<ContextType<T>>\n  implements ReactiveController\n{\n  constructor(\n    protected host: ReactiveElement,\n    private context: T,\n    initialValue?: ContextType<T>\n  ) {\n    super(initialValue);\n    this.host.addController(this);\n  }\n\n  public onContextRequest = (ev: ContextEvent<Context<unknown>>): void => {\n    if (ev.context !== this.context) {\n      return;\n    }\n    ev.stopPropagation();\n    ev.captured = true;\n    this.addCallback(ev.callback, ev.multiple);\n  };\n  hostConnected(): void {\n    this.host.addEventListener('context-request', this.onContextRequest);\n  }\n  hostDisconnected(): void {\n    this.clearCallbacks();\n  }\n}\n"],"names":["ContextProvider","ContextContainer","constructor","host","context","initialValue","super","this","ev","stopPropagation","captured","addCallback","callback","multiple","addController","hostConnected","addEventListener","onContextRequest","hostDisconnected","clearCallbacks"],"mappings":";;;;;SAmBaA,UACHC,EAGRC,YACYC,EACFC,EACRC,GAEAC,MAAMD,GAJIE,UAAAJ,EACFI,aAAAH,EAOHG,sBAAoBC,IACrBA,EAAGJ,UAAYG,KAAKH,UAGxBI,EAAGC,kBACHD,EAAGE,UAAW,EACdH,KAAKI,YAAYH,EAAGI,SAAUJ,EAAGK,YATjCN,KAAKJ,KAAKW,cAAcP,MAW1BQ,gBACER,KAAKJ,KAAKa,iBAAiB,kBAAmBT,KAAKU,kBAErDC,mBACEX,KAAKY"}